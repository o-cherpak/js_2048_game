var e=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],r=!1,t=!1,n=document.getElementById("start"),a=document.querySelector(".game-score");function o(){var e=document.querySelector(".message-lose"),r=document.querySelector(".message-win"),t=document.querySelector(".message-start");e.classList.add("hidden"),r.classList.add("hidden"),t.classList.add("hidden")}function l(){var r=!1,t=.9>Math.random()?2:4;do{var n=Math.floor(Math.random()*e.length),o=Math.floor(Math.random()*e[0].length);0===e[n][o]&&(r=!0,e[n][o]=t)}while(!r)a.innerText=function(e){for(var r=0,t=0;t<e.length;t++)for(var n=0;n<e[t].length;n++)r+=e[t][n];return r}(e)}function f(){for(var t=document.querySelector(".game-field"),n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var o=e[n][a],l=t.querySelectorAll(".field-row")[n].querySelectorAll(".field-cell")[a];l.textContent=o,l.className="field-cell",2048===o&&(r=!0,document.querySelector(".message-win").classList.remove("hidden")),0!==o?(l.classList.add("field-cell--"+o),l.textContent=o):l.textContent=""}}function i(){if(!s())return!1;for(var r=0;r<e.length;r++)for(var t=0;t<e[r].length-1;t++)if(e[r][t]===e[r][t+1]||r<e.length-1&&e[r][t]===e[r+1][t])return!1;return!0}function s(){for(var r=0;r<e.length;r++)for(var t=0;t<e[r].length;t++)if(0===e[r][t])return!1;return!0}document.addEventListener("keydown",function(n){if(t&&!r){switch((r=i())&&document.querySelector(".message-lose").classList.remove("hidden"),n.key){case"ArrowUp":(function(){for(var r=0;r<3;r++)for(var t=1;t<e.length;t++)for(var n=0;n<e[t].length;n++)if(0!==e[t][n])for(var a=t-1;a>=0;a--)if(0===e[a][n])e[a][n]=e[a+1][n],e[a+1][n]=0;else if(e[a][n]===e[a+1][n]){e[a][n]*=2,e[a+1][n]=0;break}else break;f()})();break;case"ArrowDown":(function(){for(var r=0;r<3;r++)for(var t=e.length-2;t>=0;t--)for(var n=0;n<e[t].length;n++)if(0!==e[t][n])for(var a=t+1;a<e.length;a++)if(0===e[a][n])e[a][n]=e[a-1][n],e[a-1][n]=0;else if(e[a][n]===e[a-1][n]){e[a][n]*=2,e[a-1][n]=0;break}else break;f()})();break;case"ArrowLeft":(function(){for(var r=0;r<3;r++)for(var t=0;t<e.length;t++)for(var n=1;n<e[t].length;n++)if(0!==e[t][n])for(var a=n-1;a>=0;a--)if(0===e[t][a])e[t][a]=e[t][a+1],e[t][a+1]=0;else if(e[t][a]===e[t][a+1]){e[t][a]*=2,e[t][a+1]=0;break}else break;f()})();break;case"ArrowRight":(function(){for(var r=0;r<3;r++)for(var t=0;t<e.length;t++)for(var n=e[t].length-2;n>=0;n--)if(0!==e[t][n])for(var a=n+1;a<e[t].length;a++)if(0===e[t][a])e[t][a]=e[t][a-1],e[t][a-1]=0;else if(e[t][a]===e[t][a-1]){e[t][a]*=2,e[t][a-1]=0;break}else break;f()})()}s()||i()||l(),f()}}),n.addEventListener("click",function(){t?(o(),r=!1,e.forEach(function(e){return e.fill(0)}),l(),l(),f()):(n.innerText="Restart",n.className="button restart",t=!0,l(),l(),f(),o())});
//# sourceMappingURL=index.b0f61eea.js.map
